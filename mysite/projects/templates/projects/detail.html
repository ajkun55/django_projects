{% extends "project_base_menu.html" %}
{% load humanize %} <!-- https://docs.djangoproject.com/en/4.2/ref/contrib/humanize -->
{% load custom_filters %}

{% block head %}
<style>
    .text-style {
        text-decoration: none;
        color: inherit;
        font-family: inherit;
    }

</style>
<title>John's Projects Site</title>
{% endblock %}

{% block content %}

<h1 style="margin-block:30px;">
{% if project.owner == user %}
<span style="float: right;">
<a href="{% url 'projects:project_update' project.id %}">Edit</a>
<a href="{% url 'projects:project_delete' project.id %}">Delete</a>
</span>
{% endif %}

{{ project.title }}
</h1>
<p>
{{ project.text }}
</p>

<div style="margin-bottom:20px;">
{% if project.repo %}
   <span style="font-weight: bold; font-size:1.3rem;">Repo Address:</span> <a href="{{ project.repo }}" target="_blank" rel="noopener noreferrer">
        {{ project.repo }}
    </a>
{% else %}
    <p>No repository link provided.</p>
{% endif %}
</div>

{% if project.tags.all %}
<p><span style="font-weight: bold; font-size:1.3rem;">Tags:</span>
  {% for tag in project.tags.all %}
  <span style="border:1px grey solid; background-color: LightGreen; padding-inline:10px; padding-block:7px;;"><a href="/projects/?search={{ tag }}" class="text-style">{{ tag }}</a></span>
  {% endfor %}
</p>
{% endif %}

<p style="margin-block:20px;">
This is a <span style="background-color: LightYellow; font-weight: bold; padding-inline:10px; padding-block:7px;"><a href="/projects/?search={{ project.category }}" class="text-style">{{ project.category }}</a></span> project and it requires <span style="background-color: LightYellow; font-weight: bold; padding-inline:10px; padding-block:7px;"><a href="/projects/?search={{ project.requirement }}" class="text-style">{{ project.requirement }}</a></span> skill.
</p>

<p>
<span style="font-weight: bold; font-size:1.3rem;">Status:</span> <a href="/projects/?search={{ project.status }}" class="text-style">{{ project.status }}</a>
</p>

{% if project.techs %}
<p><span style="font-weight: bold; font-size:1.3rem;">Techs:</span>
  {% for tech in project.techs|split:',' %}
  <span style="border:1px grey solid; background-color: LightBlue; padding-inline:10px; padding-block:7px;"><a href="/projects/?search={{ tech|trim }}" class="text-style">{{ tech|trim }}</a></span>
  {% endfor %}
</p>
{% endif %}

{% if project.notes %}
<p><span style="font-weight: bold; font-size:1.3rem;">Notes:</span>
  {{ project.notes }}
</p>
{% endif %}

<p>
({{ project.updated_at|naturaltime }})
</p>

{% if user.is_authenticated %}
<br clear="all"/>
<p>
{% load crispy_forms_tags %}
<form method="post" action="{% url 'projects:project_comment_create' project.id %}">
    {% csrf_token %}
    {{ comment_form|crispy }}
<input type="submit" value="Submit">
<input type="submit" value="All projects" onclick="window.location.href='{% url 'projects:all' %}';return false;">
</form>
</p>
{% endif %}

{% for comment in comments %}
<p> {{ comment.text }}
({{ comment.updated_at|naturaltime }})
{{ comment.owner.username }}
{% if user == comment.owner %}
<a href="{% url 'projects:project_comment_delete' comment.id %}"><i class="fa fa-trash"></i></a>
{% endif %}
</p>
{% endfor %}
{% endblock %}
